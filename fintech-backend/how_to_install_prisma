# install typescript and setup config

npm init -y
npm install typescript tsx @types/node --save-dev
npx tsc --init


# Install required dependencies

npm install prisma@6.19 @types/node --save-dev 
npm install @prisma/client@6.19 dotenv

# add to esdonfig.json for ESM compatibility

{
  "compilerOptions": {
    "module": "ESNext",
    "moduleResolution": "bundler",
    "target": "ES2023",
    "strict": true,
    "esModuleInterop": true,
    "ignoreDeprecations": "6.0"
  }
}

# and to pakage.json
{
  "type": "module",
}

# initialize prisma orm
npx prisma

# create ur prisma schema

npx prisma init --datasource-provider mongodb --output ../generated/prisma
# or just 
npx prisma init --datasource-provider mongodb

The above command does a few things:

    Creates a prisma/ directory with a schema.prisma file for your database connection and schema models
    Creates a .env file in the root directory for environment variables
    Creates a prisma.config.ts file for Prisma configuration


# Update your .env file with your MongoDB connection string:
e.g
DATABASE_URL="mongodb+srv://username:password@cluster.mongodb.net/mydb"


# Define your data model in prisma/schema.prisma at the end of the ile
    e.g of a model

    model User {
  id    String  @id @default(auto()) @map("_id") @db.ObjectId
  email String  @unique
  password  String
  createdAt DateTime @default(now())
}

# Push your schema to MongoDB
npx prisma db push

# Instantiate Prisma Client by putting this code in src/conig/prisma.ts
import "dotenv/config";
import { PrismaClient } from '../generated/prisma/client'

const prisma = new PrismaClient()

// export { prisma } u are  using commonjs
export default prisma;

# Write your first quer tocheck if all is ell
# Note this code JUST an eample, use the one specific for ur model
import { prisma } from './lib/prisma'

async function main() {
  // Create a new user with a post
  const user = await prisma.user.create({
    data: {
      name: 'Alice',
      email: 'alice@prisma.io',
      posts: {
        create: {
          title: 'Hello World',
          content: 'This is my first post!',
          published: true,
        },
      },
    },
    include: {
      posts: true,
    },
  })
  console.log('Created user:', user)

  // Fetch all users with their posts
  const allUsers = await prisma.user.findMany({
    include: {
      posts: true,
    },
  })
  console.log('All users:', JSON.stringify(allUsers, null, 2))
}

main()
  .then(async () => {
    await prisma.$disconnect()
  })
  .catch(async (e) => {
    console.error(e)
    await prisma.$disconnect()
    process.exit(1)
  })